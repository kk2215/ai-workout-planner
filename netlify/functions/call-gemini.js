const fetch = require('node-fetch'); exports.handler = async function(event, context) { // 環境変数から安全にAPIキーを読み込む const apiKey = process.env.GEMINI_API_KEY; const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`; // POSTリクエストとして受け取ったデータをそのままGoogleのAPIに転送する try { const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: event.body, }); if (!response.ok) { return { statusCode: response.status, body: JSON.stringify({ error: 'Gemini API request failed' }), }; } const data = await response.json(); return { statusCode: 200, body: JSON.stringify(data), }; } catch (error) { return { statusCode: 500, body: JSON.stringify({ error: error.message }), }; } };